{% load render_bundle from webpack_loader %}
{% load group_velo_users_tags %}

{% if messages %}
  {% for message in messages %}
    {% parse_message_tags tags=message.tags as tags_dict %}
    {% if message.level == 25 %}
      <div id="alert-1"
           class="w-full flex flex-row justify-between bg-green-100 border-t border-b border-green-500 text-green-700 px-4 py-3"
           role="alert"
           x-show="messageAlert"
           x-cloak
           {% if tags_dict.timeout %}data-timeout="{{ tags_dict.timeout }}"{% endif %}>
        <div class="flex-col items-center my-auto">
          <p class="font-bold">{{ message|safe|escape }}</p>
          {% if secondary_message %}<p class="text-sm align-middle">{{ secondary_message|safe|escape }}</p>{% endif %}
        </div>
        <div class="flex-col my-auto">
          <button type="button"
                  class="ml-auto -mx-1.5 bg-green-100 text-green-500 rounded-lg focus:ring-2 focus:ring-green-400 p-1.5 hover:bg-green-200 inline-flex h-8 w-8"
                  @click="messageAlert=false"
                  aria-label="Close">
            <span class="sr-only">Dismiss</span>
            <svg aria-hidden="true"
                 class="w-5 h-5"
                 fill="currentColor"
                 viewBox="0 0 20 20"
                 xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
          </button>
        </div>
      </div>
    {% elif message.level == 40 %}
      <div id="alert-2"
           class="w-full flex flex-row justify-between bg-red-100 border-t border-b border-red-500 text-red-700 px-4 py-3"
           role="alert"
           x-show="messageAlert"
           x-cloak
           {% if tags_dict.timeout %}data-timeout="{{ tags_dict.timeout }}"{% endif %}>
        <div class="flex-col items-center my-auto">
          <p class="font-bold">{{ message|safe|escape }}</p>
          {% if secondary_message %}<p class="text-sm align-middle">{{ secondary_message|safe|escape }}</p>{% endif %}
        </div>
        <div class="flex-col my-auto">
          <button type="button"
                  class="ml-auto -mx-1.5 bg-red-100 text-red-500 rounded-lg focus:ring-2 focus:ring-red-400 p-1.5 hover:bg-red-200 inline-flex h-8 w-8"
                  @click="messageAlert=false"
                  aria-label="Close">
            <span class="sr-only">Dismiss</span>
            <svg aria-hidden="true"
                 class="w-5 h-5"
                 fill="currentColor"
                 viewBox="0 0 20 20"
                 xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
          </button>
        </div>
      </div>
    {% elif message.level == 20 %}
      <div id="alert-3"
           class="w-full flex flex-row justify-between bg-blue-100 border-t border-b border-blue-500 text-blue-700 px-4 py-3"
           role="alert"
           x-show="messageAlert"
           x-cloak
           {% if tags_dict.timeout %}data-timeout="{{ tags_dict.timeout }}"{% endif %}>
        <div class="flex-col items-center my-auto">
          <p class="font-bold">{{ message|safe|escape }}</p>
          {% if secondary_message %}<p class="text-sm align-middle">{{ secondary_message|safe|escape }}</p>{% endif %}
        </div>
        <div class="flex-col my-auto">
          <button type="button"
                  class="ml-auto -mx-1.5 bg-blue-100 text-blue-500 rounded-lg focus:ring-2 focus:ring-blue-400 p-1.5 hover:bg-blue-200 inline-flex h-8 w-8"
                  @click="messageAlert=false"
                  aria-label="Close">
            <span class="sr-only">Dismiss</span>
            <svg aria-hidden="true"
                 class="w-5 h-5"
                 fill="currentColor"
                 viewBox="0 0 20 20"
                 xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
          </button>
        </div>
      </div>
    {% elif message.level == 30 %}
      <div id="alert-4"
           class="w-full flex flex-row justify-between bg-purple-100 border-t border-b border-purple-500 text-purple-700 px-4 py-3"
           role="alert"
           x-show="messageAlert"
           x-cloak
           {% if tags_dict.timeout %}data-timeout="{{ tags_dict.timeout }}"{% endif %}>
        <div class="flex-col items-center my-auto">
          <p class="font-bold">{{ message|safe|escape }}</p>
          {% if secondary_message %}<p class="text-sm align-middle">{{ secondary_message|safe|escape }}</p>{% endif %}
        </div>
        <div class="flex-col my-auto">
          <button type="button"
                  class="ml-auto -mx-1.5 bg-purple-100 text-purple-500 rounded-lg focus:ring-2 focus:ring-purple-400 p-1.5 hover:bg-purple-200 inline-flex h-8 w-8"
                  @click="messageAlert=false"
                  aria-label="Close">
            <span class="sr-only">Dismiss</span>
            <svg aria-hidden="true"
                 class="w-5 h-5"
                 fill="currentColor"
                 viewBox="0 0 20 20"
                 xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
          </button>
        </div>
      </div>
    {% endif %}
  {% endfor %}
{% endif %}
{% render_bundle 'messaging' 'js' attrs='defer' %}
