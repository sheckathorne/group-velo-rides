{% load to_sqid from group_velo_data_tags %}

<div class="space-y-4 m-2 p-2">
  <div class="flex flex-col space-y-6 bg-gradient-to-r from-purple-700 to-pink-600 text-white p-6 rounded-lg shadow-md">
    <div class="flex flex-col space-y items-baseline">
      <h1 class="text-3xl font-bold tracking-tight">My Routes</h1>
      <p class="opacity-90">Manage the routes you've created</p>
    </div>
    <div class="grid lg:grid-cols-4 md:grid-cols-2 grid-cols-1 gap-2 mt-4 mb-6 gap-y-6 gap-x-4">
      <div id="div_id_username" class="relative">
        <input type="text"
               placeholder="Route name"
               class="peer h-10 pl-8 w-full bg-transparent border rounded-md border-gray-500 dark:text-gray-200 dark:border-gray-500 placeholder-transparent focus:outline-none focus:border-gray-300"
               id="route_name_text"
               unicorn:model.debounce-500="route_name" />
        <label for="route_name_text"
               class="absolute left-0 pl-1 -top-3.5 text-gray-600 text-sm transition-all peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-2 peer-placeholder-shown:pl-8 peer-focus:pl-0 peer-focus:-top-5 peer-focus:text-gray-300 peer-focus:text-sm">
          Route name
        </label>
        <div class="absolute inset-y-0 left-0 flex items-center pl-1 pointer-events-none stroke-gray-400 dark:stroke-gray-400 peer-focus:stroke-gray-600 peer-focus:dark:stroke-gray-300">
          <svg class="w-5 h-5"
               aria-hidden="true"
               fill="currentColor"
               viewBox="0 0 20 20"
               xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
          </svg>
        </div>
      </div>
      <div id="div_id_club_name" class="relative">
        <input type="text"
               placeholder="Route name"
               class="peer h-10 pl-8 w-full bg-transparent border rounded-md border-gray-500 dark:text-gray-200 dark:border-gray-500 placeholder-transparent focus:outline-none focus:border-gray-300"
               input
               unicorn:model.debounce-500="club_name"
               id="club_name_text" />
        <label for="club_name_text"
               class="absolute left-0 pl-1 -top-3.5 text-gray-600 text-sm transition-all peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-2 peer-placeholder-shown:pl-8 peer-focus:pl-0 peer-focus:-top-5 peer-focus:text-gray-300 peer-focus:text-sm">
          Club name
        </label>
        <div class="absolute inset-y-0 left-0 flex items-center pl-1 pointer-events-none stroke-gray-400 dark:stroke-gray-400 peer-focus:stroke-gray-600 peer-focus:dark:stroke-gray-300">
          <svg class="w-5 h-5"
               aria-hidden="true"
               fill="currentColor"
               viewBox="0 0 20 20"
               xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
          </svg>
        </div>
      </div>
      <div id="div_id_distance_lt" class="relative">
        <input type="text"
               placeholder="Distance less than"
               class="peer h-10 pl-8 w-full bg-transparent border rounded-md border-gray-500 dark:text-gray-200 dark:border-gray-500 placeholder-transparent focus:outline-none focus:border-gray-300"
               input
               unicorn:model.debounce-500="distance_lt"
               id="distance_lt_text"
               pattern="[0-9]*" />
        <label for="distance_lt_text"
               class="absolute left-0 pl-1 -top-3.5 text-gray-600 text-sm transition-all peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-2 peer-placeholder-shown:pl-8 peer-focus:pl-0 peer-focus:-top-5 peer-focus:text-gray-300 peer-focus:text-sm">
          Distance less than
        </label>
        <div class="absolute inset-y-0 left-0 flex items-center pl-1 pointer-events-none text-gray-500 dark:text-gray-400 peer-focus:text-gray-600 peer-focus:dark:text-gray-300">
          <i class="fa-solid fa-ruler-horizontal text-gray-200 w-5 h-5"></i>
        </div>
      </div>
      <div id="div_id_distance_gt" class="relative">
        <input type="text"
               placeholder="Distance greater than"
               class="peer h-10 pl-8 w-full bg-transparent border rounded-md border-gray-500 dark:text-gray-200 dark:border-gray-500 placeholder-transparent focus:outline-none focus:border-gray-300"
               input
               unicorn:model.debounce-500="distance_gt"
               id="distance_gt_text"
               pattern="[0-9]*" />
        <label for="distance_gt_text"
               class="absolute left-0 pl-1 -top-3.5 text-gray-600 text-sm transition-all peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-2 peer-placeholder-shown:pl-8 peer-focus:pl-0 peer-focus:-top-5 peer-focus:text-gray-300 peer-focus:text-sm">
          Distance greater than
        </label>
        <div class="absolute inset-y-0 left-0 flex items-center pl-1 pointer-events-none text-gray-500 dark:text-gray-400 peer-focus:text-gray-600 peer-focus:dark:text-gray-300">
          <i class="fa-solid fa-ruler-horizontal text-gray-200 w-5 h-5"></i>
        </div>
      </div>
    </div>
  </div>
  <div class="relative overflow-y-auto my-6">
    <table id="my-routes-table"
           class="min-w-full divide-y divide-gray-200 dark:divide-gray-700 text-xs">
      <thead id="my-routes-table-head"
             class="uppercase text-sm font-semibold dark:text-gray-300">
        <tr>
          <th scope="col"
              colspan="2"
              class="px-6 py-3"
              data-original-text="Actions">
            <div class="flex items-center">
              <span class="mx-auto">Actions</span>
            </div>
          </th>
          <th scope="col"
              class="px-6 py-3 cursor-pointer"
              data-original-text="Route Name">
            <div class="flex items-center">
              Name
              <svg xmlns="http://www.w3.org/2000/svg"
                   class="w-3 h-3 ml-1"
                   aria-hidden="true"
                   fill="currentColor"
                   viewBox="0 0 320 512">
                <path d="M27.66 224h264.7c24.6 0 36.89-29.78 19.54-47.12l-132.3-136.8c-5.406-5.406-12.47-8.107-19.53-8.107c-7.055 0-14.09 2.701-19.45 8.107L8.119 176.9C-9.229 194.2 3.055 224 27.66 224zM292.3 288H27.66c-24.6 0-36.89 29.77-19.54 47.12l132.5 136.8C145.9 477.3 152.1 480 160 480c7.053 0 14.12-2.703 19.53-8.109l132.3-136.8C329.2 317.8 316.9 288 292.3 288z" />
              </svg>
            </div>
          </th>
          <th scope="col"
              class="px-6 py-3 cursor-pointer"
              data-original-text="Club">
            <div class="flex items-center">
              Club
              <svg xmlns="http://www.w3.org/2000/svg"
                   class="w-3 h-3 ml-1"
                   aria-hidden="true"
                   fill="currentColor"
                   viewBox="0 0 320 512">
                <path d="M27.66 224h264.7c24.6 0 36.89-29.78 19.54-47.12l-132.3-136.8c-5.406-5.406-12.47-8.107-19.53-8.107c-7.055 0-14.09 2.701-19.45 8.107L8.119 176.9C-9.229 194.2 3.055 224 27.66 224zM292.3 288H27.66c-24.6 0-36.89 29.77-19.54 47.12l132.5 136.8C145.9 477.3 152.1 480 160 480c7.053 0 14.12-2.703 19.53-8.109l132.3-136.8C329.2 317.8 316.9 288 292.3 288z" />
              </svg>
            </div>
          </th>
          <th scope="col"
              class="px-6 py-3 cursor-pointer"
              data-original-text="Distance (mi)">
            <div class="flex items-center">
              Dist. (mi)
              <svg xmlns="http://www.w3.org/2000/svg"
                   class="w-3 h-3 ml-1"
                   aria-hidden="true"
                   fill="currentColor"
                   viewBox="0 0 320 512">
                <path d="M27.66 224h264.7c24.6 0 36.89-29.78 19.54-47.12l-132.3-136.8c-5.406-5.406-12.47-8.107-19.53-8.107c-7.055 0-14.09 2.701-19.45 8.107L8.119 176.9C-9.229 194.2 3.055 224 27.66 224zM292.3 288H27.66c-24.6 0-36.89 29.77-19.54 47.12l132.5 136.8C145.9 477.3 152.1 480 160 480c7.053 0 14.12-2.703 19.53-8.109l132.3-136.8C329.2 317.8 316.9 288 292.3 288z" />
              </svg>
            </div>
          </th>
          <th scope="col"
              class="px-6 py-3 cursor-pointer"
              data-original-text="Elevation (ft)">
            <div class="flex items-center">
              Ele. (ft)
              <svg xmlns="http://www.w3.org/2000/svg"
                   class="w-3 h-3 ml-1"
                   aria-hidden="true"
                   fill="currentColor"
                   viewBox="0 0 320 512">
                <path d="M27.66 224h264.7c24.6 0 36.89-29.78 19.54-47.12l-132.3-136.8c-5.406-5.406-12.47-8.107-19.53-8.107c-7.055 0-14.09 2.701-19.45 8.107L8.119 176.9C-9.229 194.2 3.055 224 27.66 224zM292.3 288H27.66c-24.6 0-36.89 29.77-19.54 47.12l132.5 136.8C145.9 477.3 152.1 480 160 480c7.053 0 14.12-2.703 19.53-8.109l132.3-136.8C329.2 317.8 316.9 288 292.3 288z" />
              </svg>
            </div>
          </th>
          <th scope="col"
              class="px-6 py-3 cursor-pointer"
              data-original-text="Start Location">
            <div class="flex items-center">
              Start
              <svg xmlns="http://www.w3.org/2000/svg"
                   class="w-3 h-3 ml-1"
                   aria-hidden="true"
                   fill="currentColor"
                   viewBox="0 0 320 512">
                <path d="M27.66 224h264.7c24.6 0 36.89-29.78 19.54-47.12l-132.3-136.8c-5.406-5.406-12.47-8.107-19.53-8.107c-7.055 0-14.09 2.701-19.45 8.107L8.119 176.9C-9.229 194.2 3.055 224 27.66 224zM292.3 288H27.66c-24.6 0-36.89 29.77-19.54 47.12l132.5 136.8C145.9 477.3 152.1 480 160 480c7.053 0 14.12-2.703 19.53-8.109l132.3-136.8C329.2 317.8 316.9 288 292.3 288z" />
              </svg>
            </div>
          </th>
          <th scope="col"
              class="px-6 py-3 cursor-pointer"
              data-original-text="# Rides">
            <div class="flex items-center">
              # Rides
              <svg xmlns="http://www.w3.org/2000/svg"
                   class="w-3 h-3 ml-1"
                   aria-hidden="true"
                   fill="currentColor"
                   viewBox="0 0 320 512">
                <path d="M27.66 224h264.7c24.6 0 36.89-29.78 19.54-47.12l-132.3-136.8c-5.406-5.406-12.47-8.107-19.53-8.107c-7.055 0-14.09 2.701-19.45 8.107L8.119 176.9C-9.229 194.2 3.055 224 27.66 224zM292.3 288H27.66c-24.6 0-36.89 29.77-19.54 47.12l132.5 136.8C145.9 477.3 152.1 480 160 480c7.053 0 14.12-2.703 19.53-8.109l132.3-136.8C329.2 317.8 316.9 288 292.3 288z" />
              </svg>
            </div>
          </th>
        </tr>
      </thead>
      <tbody id="my-routes-table-body">
        {% with filter_pag=filtered_routes.pagination %}
          {% for route in filter_pag.item_list %}
            {% with route=route.route form=route.form %}
              <tr id="route-{{ route.id|to_sqid }}"
                  class="group dark:border-gray-700 text-gray-500 dark:text-gray-300 cursor-pointer route-row hover:text-black dark:hover:text-white">
                <td class="px-6 py-4" width="50px">
                  <button @click="editRouteModalOpen=true"
                          hx-target="#editRouteModalReplace"
                          hx-swap="outerHTML"
                          hx-get="{% url 'routes:get_edit_form' route_sqid=route.id|to_sqid %}">
                    <i class="fas fa-edit text-blue-700"></i>
                  </button>
                </td>
                <td class="px-6 py-4" width="50px">
                  <button type="button"
                          @click="deleteRouteModalOpen=true"
                          hx-get="{% url 'routes:get_delete_form' route_sqid=route.id|to_sqid %}"
                          hx-target="#deleteRouteModalReplace"
                          hx-swap="outerHTML">
                    <i class="fa-solid fa-x fa text-red-600"></i>
                  </button>
                </td>
                <td class="px-6 py-4">
                  <a href="{{ route.url }}"
                     target="_blank"
                     class="underline text-blue-600 hover:text-blue-800">{{ route.name }}</a>
                </td>
                <td class="px-6 py-4">{{ route.club.name }}</td>
                <td class="px-6 py-4">{{ route.distance }}</td>
                <td class="px-6 py-4">{{ route.elevation }}</td>
                {% if route.has_start_address %}
                  <td class="px-6 py-4">
                    <a href="{{ route.google_map_start_address }}"
                       target="_blank"
                       class="underline text-blue-600 hover:text-blue-800">{{ route.start_location_name }}</a>
                  </td>
                {% else %}
                  <td class="px-6 py-4">{{ route.start_location_name }}</td>
                {% endif %}
                <td class="px-6 py-4">{{ route.num_rides }}</td>
              </tr>
            {% endwith %}
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% if filter_pag.num_pages > 1 %}
      <div class="pt-1">{% include 'pagination.html' with pagination_items=filtered_routes.pagination.html_list %}</div>
    {% endif %}
  {% endwith %}
</div>
