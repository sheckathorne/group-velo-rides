{% extends "base.html" %}

{% block title %}
  GroupVelo | My Clubs
{% endblock title %}
{% block content %}
  {% if club_list %}
    <div x-data="{ search: '', club_names: {{ club_names }} }" class="w-full">
      {% include 'clubs/modals/request_club_verification/_blank.html' %}
      <div class="flex flex-col gap-6 w-full">
        <div class="flex flex-col space-y-2 bg-gradient-to-r from-purple-700 to-pink-600 text-white p-6 rounded-lg shadow-md">
          <h1 class="text-3xl font-bold tracking-tight">My Clubs</h1>
          <p class="opacity-90">Manage your cycling club memberships and activities</p>
          <input type="text"
                 placeholder="Filter clubs..."
                 class="w-full shadow-lg rounded-md focus:ring-2 dark:text-gray-200 text-gray-700 focus:ring-blue-700 border-gray-300 border dark:focus:ring-blue-500 px-4 leading-normal py-2 appearance-none bg-white textinput block dark:bg-transparent dark:border-gray-500 placeholder-gray-700 dark:placeholder-gray-200"
                 id="club_name_text"
                 x-model.debounce.400ms="search" />
        </div>
        <div class="flex flex-col gap-4">
          {% for mem in club_list %}
            {% with membership=mem.membership available_ride_count=mem.available_ride_count registered_ride_count=mem.registered_ride_count enable_rides_button=mem.enable_rides_button %}
              {% include "clubs/club_card/_club_card.html" %}
            {% endwith %}
          {% endfor %}
          <div x-show="search && !club_names.find(clubname => clubname.includes(search.toLowerCase()))">
            <h3 class="text-xl font-bold text-gray-700 dark:text-gray-200">No clubs to show, try removing filter</h3>
          </div>
        </div>
      </div>
    </div>
  {% else %}
    <span class="font-bold text-gray-700 dark:text-gray-200">You are not a member of any clubs.
      <br />
      <br />
      <a class="underline text-blue-600 hover:text-blue-800 visited:text-purple-600"
         href="{% url 'clubs:search_club' %}">Search and join</a>
      or
      <a class="underline text-blue-600 hover:text-blue-800 visited:text-purple-600"
         href="{% url 'clubs:create_club' %}">create</a>
      your own now!
    </span>
  {% endif %}
{% endblock content %}
